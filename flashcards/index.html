<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Cards</title>
    <link rel="icon" href="../icons/BGicon.png">
    <style>
       @font-face {
    font-family: 'Zapfino';
    src: url('../fonts/Zapfino.ttf') format('truetype');
}

body {
    background-color: rgb(45, 70, 119);
    font-family: 'Andika', sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    overflow: hidden;
    background-image: url('BASIS logo/Full Logo White on Transparent.png');
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: right bottom;
    background-size: 25vh;
}

.background, .overlay, .overlay2 {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.background {
    background: linear-gradient(135deg, rgb(45, 70, 119), rgb(9, 32, 79));
    opacity: 0.8;
    z-index: -2;
}

.overlay, .overlay2 {
    mix-blend-mode: overlay;
    opacity: 0.5;
    animation: pulse 1.5s infinite alternate;
}

.overlay {
    background: radial-gradient(circle at 30% 70%, #303f6c 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, #236693 0%, transparent 50%);
}

.overlay2 {
    background: radial-gradient(circle at 70% 70%, #ffffff 0%, transparent 50%),
                radial-gradient(circle at 30% 30%, #b8b8b8 0%, transparent 50%);
    animation-duration: 2s;
}

@keyframes pulse {
    0% { opacity: 0.3; transform: scale(1); }
    100% { opacity: 0.7; transform: scale(1.1); }
}

h1, .Title, .Subtitle {
    text-align: center;
    margin-bottom: 40px;
    white-space: nowrap;
}

.Title {
    font-family: sans-serif;
    font-size: 200%;
}

.Subtitle {
    font-family: 'Zapfino', sans-serif;
    margin-top: -1em;
    font-size: 45px;
    min-width: fit-content;
}

.dropdown {
    position: fixed;
    top: 155px;
    left: 50%;
    transform: translate(-50%, 200%);
    z-index: 999;
}

.english, .term {
    text-align: center;
    font-family: 'Andika', sans-serif;
}

.english {
    font-size: 100%;
    margin-top: 4em;
    padding-inline: 50px;
}

.term-container, .term {
    position: fixed;
    left: 10%;
    width: 80%;
}

.term-container {
    margin-top: 0px;
    background-color: rgba(15, 22, 33, 0.441);
    border-radius: 10px;
    font-size: 500%;
    color: rgba(225, 226, 227, 0);
    z-index: -2;
}

.term {
    margin-top: -15px;
    font-size: 200%;
    z-index: -1;
}

.button-container {
    position: fixed;
    text-align: center;
    margin-top: -28em;
    width: 100%;
    z-index: 0;
    bottom: 0px;
}

.pinyinbutton, .definitionButton, .nextButton {
    position: fixed;
    color: rgba(255, 255, 255, 0.485);
    background-color: transparent;
    border: none;
    z-index: 1;
}

.pinyinbutton {
    top: -1880px;
    height: 3000px;
    width: 100vw;
    transform: translateX(-0.59%) translateY(20.5%);
}

.definitionButton, .nextButton {
    top: -258px;
    height: 1500px;
    width: 150vw;
    transform: translateX(-33.5%);
}

.BGLogo img {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: -100;
}

.toggle-container {
    text-align: center;
    position: absolute;
    width: 80%;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
    margin-top: 10px;
}

.speed-label {
    display: none;
    margin-bottom: 5px;
    font-size: 0.8rem;
}

#speedSlider {
    display: none;
    width: 200px;
    margin: 5px auto 10px;
    background: linear-gradient(to right, #2196F3 0%, #ccc 100%);
    border-radius: 10px;
}

.switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
    vertical-align: middle;
    margin-left: 5px;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #2196F3;
}

input:checked + .slider:before {
    transform: translateX(20px);
}

.hamburger-menu {
    position: absolute;
    margin-left: 7px;
    top: 20px;
    left: 13px;
    z-index: 1000;
}

.menu-toggle {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    width: 30px;
    height: 25px;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 20;
    z-index: 1001;
}

.menu-toggle span {
    width: 30px;
    height: 3px;
    background: white;
    border-radius: 10px;
    transition: all 0.3s linear;
}

.menu-toggle.open span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
}

.menu-toggle.open span:nth-child(2) {
    opacity: 0;
}

.menu-toggle.open span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
}

.menu-items {
    position: absolute;
    top: 25px;
    left: -250px;
    background: linear-gradient(135deg, rgba(48, 67, 104, 0.8), rgba(20, 31, 53, 0.8));
    width: 250px;
    height: 90vh;
    padding-top: 20px;
    transition: all 0.3s ease-in-out;
    opacity: 0;
}

.menu-items.show {
    left: 0;
    opacity: 1;
}

.menu-items a {
    display: block;
    padding: 15px 20px;
    color: white;
    text-decoration: none;
    transition: background-color 0.2s, opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    opacity: 0;
    transform: translateX(-20px);
}

.menu-items.show a {
    opacity: 1;
    transform: translateX(0);
}

.menu-items a:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.menu-items a:nth-child(n) {
    transition-delay: calc(0.1s * var(--n));
}

.menu-title, .menu-footer {
    text-align: center;
    color: white;
}

.menu-title {
    font-size: 18px;
    margin-bottom: 10px;
}

.menu-footer {
    position: absolute;
    bottom: 10px;
    width: 100%;
    font-size: 12px;
}
    </style>
</head>
<body>
    <div class="background"></div>
    <div class="overlay"></div>
    <div class="overlay2"></div>
  <body onload="getRandomWord()">
    <h1 class="Title">BIPH Music</h1>
    <h1 class="Subtitle">Flash Cards</h1>

    <div class="dropdown">
      <select id="unitSelector" onchange="filterTerms()" style="margin-top: -20px;">
        <option value="Cumulative">Cumulative</option>
        <option value="Unit1">Unit 1</option>
        <option value="Unit2">Unit 2</option>
        <option value="Unit3">Unit 3</option>
        <option value="Unit4">Unit 4</option>
        <option value="Unit5">Unit 5</option>
        <option value="Jan16">Jan 16 Test</option>
      </select>
    </div>

    <div class="hamburger-menu">
        <button class="menu-toggle" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="menu-items" id="menu-items">
            <div class="menu-title">BIPH Music</div>
            <a href="https://biphmusic.github.io/">Home</a>
            <a href="https://biphmusic.github.io/units/">AP Units</a>
            <a href="https://biphmusic.github.io/flashcards/">Flash Cards</a>
            <a href="https://biphmusic.github.io/dice/">Dice Simulator</a>
            <a href="https://biphmusic.github.io/piano/">Web Piano</a>
            <a href="https://biphmusic.github.io/wordwall/">Word Wall</a>
            <a href="mailto:garrison.tubbs-biph@basischina.com">Contact</a>
            
            <div class="menu-footer">Â© Garrison Tubbs 2024</div>
        </div>
    </div>

    <div>
        <h3 class="english"></h3>
    </div>

    <div>
        <h3 class="pinyin"></h3>
    </div>

    <div> <h3 class="term-container">A</h3></div>
    <div>
      <h3 class="term"></h3>
    </div>

    <div class="button-container">
        <div class="definitionButton">
          <button class="pinyinbutton"></button>
          <button class="definitionButton">Click anywhere to Reveal the Definition</button>
        </div>
      
        <div class="nextButton">
          <button class="nextButton">Click anywhere to Go to the next word</button>
        </div>
    </div>

    <div class="BGLogo">
        <img src="https://i.postimg.cc/FKjG7zKB/BG-5percent.png" alt="Background logo">
    </div>

    <div class="toggle-container">
        <label class="speed-label" id="speedLabel">Speed</label>
        <input type="range" id="speedSlider" min="300" max="4000" value="1000">
        <label for="autoplayToggle">Auto-play</label>
        <label class="switch">
            <input type="checkbox" id="autoplayToggle" onchange="toggleSpeedLabel()">
            <span class="slider"></span>
        </label>
    </div>

    <script src="../terms.js"></script>
    <script>
    var vocab; // Declare vocab variable
    let currentState = 0; // 0: term hidden, 1: term visible
    let autoplayInterval;

    function getVocab() {
        let vocabSelect = document.querySelector('select');
        if (vocabSelect.value == 'Unit1') {
            vocab = unit1;
            getRandomWord();
        } else if (vocabSelect.value == 'Unit2') {
            vocab = unit2; 
            getRandomWord();
        } else if (vocabSelect.value == 'Unit3') {
            vocab = unit3; 
            getRandomWord();
        } else if (vocabSelect.value == 'unit4') {
            vocab = unit4; 
            getRandomWord();
        } else if (vocabSelect.value == 'unit5') {
            vocab = unit5; 
            getRandomWord();
        } else if (vocabSelect.value == 'jan16') {
            vocab = jan16; 
            getRandomWord();
        } else if (vocabSelect.value == 'Cumulative') {
            vocab = cumulative;
        }
    }


    getVocab()

    let listlength = Object.keys(vocab).length;
    let theword = Math.floor(Math.random() * listlength);

    const term = document.querySelector('.term');
    const pinyin = document.querySelector('.pinyin');
    const english = document.querySelector('.english');
    const pinyinButton = document.querySelector('.button-container .pinyinbutton');
    const definitionButton = document.querySelector('.button-container .definitionButton');
    const nextButton = document.querySelector('.button-container .nextButton');

    function getRandomWord() {
        listlength = Object.keys(vocab).length;
        theword = Math.floor(Math.random() * listlength);
        term.innerHTML = `<h3>${vocab[theword]}</h3>`;
        
        // Find the definition from the theglossary variable
        const definitionEntry = theglossary.find(entry => entry.Term === vocab[theword]);
        english.innerHTML = `<h3>${definitionEntry ? definitionEntry.Definition : 'Definition not found'}</h3>`;
        
        term.style.visibility='hidden';
        pinyin.style.visibility='hidden';
        pinyinButton.style.display = 'none'; 
        definitionButton.style.display='block';
        nextButton.style.display='none';
        currentState = 0;
    }

    definitionButton.addEventListener('click', () => {
        term.style.visibility = 'visible';
        definitionButton.style.display='none'
        nextButton.style.display='block';
        currentState = 1;
    })

    nextButton.addEventListener('click', () => {
        pinyin.style.visibility = 'hidden';
        english.style.visibility = 'hidden';
        nextButton.style.display='none';
        definitionButton.style.display = 'block';  
        english.style.visibility = 'visible';
        getRandomWord();
    });

    function startAutoplay() {
        clearInterval(autoplayInterval);
        const speed = 5100 - parseInt(document.getElementById("speedSlider").value);
        autoplayInterval = setInterval(() => {
            if (currentState === 0) {
                term.style.visibility = 'visible';
                definitionButton.style.display = 'none';
                nextButton.style.display = 'block';
                currentState = 1;
            } else {
                getRandomWord();
            }
        }, speed);
    }

    document.body.addEventListener("keydown", function(event) {
        if (event.key === "Enter") {
            if (currentState === 0) {
                term.style.visibility = 'visible';
                definitionButton.style.display = 'none';
                nextButton.style.display = 'block';
                currentState = 1;
            } else {
                getRandomWord();
            }
        } else if (event.key === " ") { // Spacebar to toggle autoplay
            const autoplayToggle = document.getElementById("autoplayToggle");
            autoplayToggle.checked = !autoplayToggle.checked;
            toggleSpeedLabel();
            if (autoplayToggle.checked) {
                startAutoplay();
            } else {
                clearInterval(autoplayInterval);
                currentState = 0;
            }
        } else if (document.getElementById("autoplayToggle").checked) { // Adjust speed with arrow keys when in autoplay mode
            const speedSlider = document.getElementById("speedSlider");
            let currentValue = parseInt(speedSlider.value);
            if (event.key === "ArrowUp" && currentValue < 5000) {
                speedSlider.value = currentValue + 300;
            } else if (event.key === "ArrowDown" && currentValue > 100) {
                speedSlider.value = currentValue - 300;
            }
            startAutoplay(); // Restart autoplay with new speed
        }
    });

    function toggleSpeedLabel() {
        const speedLabel = document.getElementById('speedLabel');
        const speedSlider = document.getElementById('speedSlider');
        const autoplayToggle = document.getElementById('autoplayToggle');
        speedLabel.style.display = autoplayToggle.checked ? 'block' : 'none';
        speedSlider.style.display = autoplayToggle.checked ? 'block' : 'none';
        if (autoplayToggle.checked) {
            startAutoplay();
        } else {
            clearInterval(autoplayInterval);
            currentState = 0;
        }
    }

        // Add event listener for speed slider
        document.getElementById("speedSlider").addEventListener("input", function() {
        if (document.getElementById("autoplayToggle").checked) {
            startAutoplay();
        }
    });

    // Hamburger menu functionality
    const menuToggle = document.querySelector('.menu-toggle');
    const menuItems = document.querySelector('.menu-items');
    
    function toggleMenu() {
        menuToggle.classList.toggle('open');
        menuItems.classList.toggle('show');
    }
    
    // Close the menu when clicking outside
    document.addEventListener('click', (event) => {
        // Check if the click was outside the menu and the toggle button
        if (!menuToggle.contains(event.target) && !menuItems.contains(event.target)) {
            menuToggle.classList.remove('open');
            menuItems.classList.remove('show');
        }
    });

    function filterTerms() {
        const selectedUnit = document.getElementById('unitSelector').value;
        let filteredTerms;

        if (selectedUnit === 'Cumulative') {
            filteredTerms = cumulative;
        } else if (selectedUnit === 'Jan16') {
            filteredTerms = jan16;
        } else {
            // Get the corresponding unit terms
            filteredTerms = selectedUnit === 'Unit1' ? unit1 : unit2;
        }

        // Update the vocab variable with the filtered terms
        vocab = filteredTerms;

        // Reset the display
        getRandomWord();
    }

    // Set the dropdown to always select the last item
    document.getElementById('unitSelector').value = 'Jan16'; // Change to the last option
    filterTerms(); // Call to filter terms based on the default selection

    getRandomWord();
    </script>
</body>
</html>